<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil Edit</title>
    <link rel="stylesheet" href="profil.style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="profil.script.js"></script>
</head>

<body>
    <div class="container light-style flex-grow-1 container-p-y">
        <h4 class="font-weight-bold py-3 mb-4">
            Account settings
        </h4>
        <div class="card overflow-hidden">
            <div class="row no-gutters row-bordered row-border-light">
                <div class="col-md-3 pt-0">
                    <div class="list-group list-group-flush account-settings-links">
                        <a class="list-group-item list-group-item-action active" data-toggle="list" href="#account-general">General</a>
                        <a class="list-group-item list-group-item-action" data-toggle="list" href="#account-change-password">Change password</a>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="tab-content">
                        <div class="tab-pane fade active show" id="account-general">
                            <div class="card-body media align-items-center">
                                <img src="https://static.vecteezy.com/ti/gratis-vektor/p3/7113275-avatar-mann-gesicht-silhouette-benutzerzeichen-person-profilbild-mannlich-symbol-im-kreis-rund-schwarz-farbe-illustration-bild-umriss-konturlinie-dunn-stil-vektor.jpg" alt class="d-block ui-w-80">
                                <div class="media-body ml-4">
                                    <label class="btn btn-outline-primary" for="upload-btn">
                                        Upload new photo
                                        <input type="file" class="account-settings-fileinput" id="upload-btn">
                                    </label> &nbsp;
                                    <button type="button" class="btn btn-default md-btn-flat" id="reset-btn">Reset</button>
                                </div>
                            </div>
                            <hr class="border-light m-0">
                            <div class="card-body">
                                <div class="form-group">
                                    <label class="form-label">Username</label>
                                    <input type="text" class="form-control mb-1" id="username">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Name</label>
                                    <input type="text" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">E-mail</label>
                                    <input type="text" class="form-control mb-1">
                                </div>
                            </div>
                            <div class="text-right mt-3">
                                <button type="button" class="btn btn-primary" id="save-btn">Save changes</button>&nbsp;
                                <button type="button" class="btn btn-default" id="cancel-btn">Cancel</button>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="account-change-password">
                            <div class="card-body pb-2">
                                <div class="form-group">
                                    <label class="form-label">Current password</label>
                                    <input type="password" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">New password</label>
                                    <input type="password" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Repeat new password</label>
                                    <input type="password" class="form-control">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            // When an image is selected
            $("#upload-btn").change(function () {
                readURL(this);
            });

            // When the "Reset" button is clicked
            $("#reset-btn").click(function () {
                // Reset the image (restore default image)
                $('.media img').attr('src', 'https://static.vecteezy.com/ti/gratis-vektor/p3/7113275-avatar-mann-gesicht-silhouette-benutzerzeichen-person-profilbild-mannlich-symbol-im-kreis-rund-schwarz-farbe-illustration-bild-umriss-konturlinie-dunn-stil-vektor.jpg');
                // Clear the file input field
                $("#upload-btn").val('');
            });

            // Save button click event
            $("#save-btn").click(function () {
                // Update user information in local storage
                updateUserInfo({
                    profileImage: $('.media img').attr('src'),
                    username: $('#username').val(),
                    // Add other fields as needed
                });

                // Broadcast the updated user information to other pages (e.g., index.html)
                broadcastUserInfo();

                // Redirect to index.html
                window.location.href = 'index.html';
            });

            // Cancel button click event
            $("#cancel-btn").click(function () {
                // Reset the image (restore default image)
                $('.media img').attr('src', 'https://static.vecteezy.com/ti/gratis-vektor/p3/7113275-avatar-mann-gesicht-silhouette-benutzerzeichen-person-profilbild-mannlich-symbol-im-kreis-rund-schwarz-farbe-illustration-bild-umriss-konturlinie-dunn-stil-vektor.jpg');

                // Clear the file input field
                $("#upload-btn").val('');

                // Reset other form fields
                $('#username').val('');
                // Reset other fields as needed
            });

            // Function to show the preview of the selected image
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        // Display the selected image in the preview
                        $('.media img').attr('src', e.target.result);
                    }

                    reader.readAsDataURL(input.files[0]); // Read the image as a data URL
                }
            }

            // Update user information in local storage
            function updateUserInfo(data) {
                var userInfo = JSON.parse(localStorage.getItem('userInfo')) || {};
                userInfo = { ...userInfo, ...data };
                localStorage.setItem('userInfo', JSON.stringify(userInfo));
            }

            // Function to broadcast user information to other pages
            function broadcastUserInfo() {
                // Dispatch a storage event with the updated user information
                window.dispatchEvent(new Event('storage'));
            }
        });
    </script>
</body>

</html>
